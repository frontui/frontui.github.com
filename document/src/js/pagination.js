/*! 
*  frontui v1.0.2
*  by frontpay FE Team
*  (c) 2016-05-10 www.frontpay.cn
*  Licensed under Apache License
*/
!function(e,t){"function"==typeof define&&define.amd?define("ui/pagination",["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){"use strict";function t(t){var i=arguments;return e(this).each(function(){var s=e(this);if(!s.hasClass("no-js")){var n=s.data("ui.pagination");n||s.data("ui.pagination",n=new a(s,e.extend({},s.data(),t))),"string"==typeof t&&n[t].apply(n,[].slice.call(i,1))}})}var i="active",s='<p class="pull-left fs-12 lh-26">\u5171{$pages}\u9875\uff0c{$items}\u6761\u8bb0\u5f55\uff0c\u6bcf\u9875\u663e\u793a{$itemsOnPage}\u6761\u3002</p>',a=function(t,i){this.$el=e(t),this._init(i)};a.VERSION="1.0.0",a.DEFAULTS={items:1,itemsOnPage:1,pages:0,displayedPages:8,edges:1,currentPage:0,pageStr:{show:!1,template:""},lblPrev:"\u4e0a\u4e00\u9875",lblNext:"\u4e0b\u4e00\u9875",onSelectPage:function(){}},a.prototype._init=function(t,i){var s=this;this._setOption(t),s.itemsOnPage=this.options.itemsOnPage,s.items=this.options.items,s.current=this.options.currentPage,s.pages=s.options.pages?s.options.pages:Math.ceil(s.items/this.itemsOnPage)?Math.ceil(s.items/s.itemsOnPage):1,s.currentPage=s.options.currentPage-1,s.halfDisplayed=s.options.displayedPages/2,s._render(),!i&&s.$el.on("click","a[data-page]",function(t){t.preventDefault(),s.selectPage(e(this).data("page"))})},a.prototype.init=function(e){this._init(e,!0)},a.prototype._setOption=function(t){this.options=e.extend({},a.DEFAULTS,t)},a.prototype.selectPage=function(e,t){this.currentPage=e-1,this.current=e,this.render(t),this.options.onSelectPage(e,this),this.$el.trigger("select.ui.pagination",[e,this])},a.prototype._render=function(){var e,t=this.options,i=this._getInterval();if(this.$el.empty().prevAll().remove(),!(this.pages<=1)){if(t.lblPrev&&this.currentPage-1>=0&&this._append(this.currentPage-1,{text:t.lblPrev},!0),i.start>0&&t.edges>0){var s=Math.min(t.edges,i.start);for(e=0;s>e;e++)this._append(e);t.edges<i.start&&i.start-t.edges!=1?this.$el.append("<li><span>...</span></li>"):i.start-t.edges==1&&this._append(t.edges)}for(e=i.start;e<i.end;e++)this._append(e);if(i.end<this.pages&&t.edges>0){this.pages-t.edges>i.end&&this.pages-t.edges-i.end!=1?this.$el.append("<li><span>...</span></li>"):this.pages-t.edges-i.end==1&&this._append(i.end++);var a=Math.max(this.pages-t.edges,i.end);for(e=a;e<this.pages;e++)this._append(e)}t.lblNext&&this.currentPage<this.pages-1&&this._append(this.currentPage+1,{text:t.lblNext},!0),this.renderPageStr()}},a.prototype.renderPageStr=function(){if(this.options.pageStr&&this.options.pageStr.show){var t=this,i=t.$el.prevAll(),a=this.options.pageStr.template||s;a=a.replace(/{\$(\w*)}/gi,function(e,i,s){return t[i]?t[i]:0}),i.length&&i.remove(),t.$el.before(e(a))}},a.prototype.render=function(e){this.pages=e?e:this.pages,this._render()},a.prototype._getInterval=function(){return{start:Math.ceil(this.currentPage>this.halfDisplayed?Math.max(Math.min(this.currentPage-this.halfDisplayed,this.pages-this.options.displayedPages),0):0),end:Math.ceil(this.currentPage>this.halfDisplayed?Math.min(this.currentPage+this.halfDisplayed,this.pages):Math.min(this.options.displayedPages,this.pages))}},a.prototype._append=function(t,s,a){var n,p,r=this;t=0>t?0:t<this.pages?t:this.pages-1,p=e.extend({text:t+1},s),n=t==this.currentPage?"<li "+(a?"":'class="'+i+'"')+'><a href="javascript:void(0);">'+p.text+"</a></li>":'<li><a href="#page-'+(t+1)+'" data-page="'+(t+1)+'">'+p.text+"</a></li>",r.$el.append(n)},e.fn.pagination=t,e.fn.pagination.Constructor=a,e(function(){e("[ui-pagination],.pagination").pagination()})});