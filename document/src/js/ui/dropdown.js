!function(t,r){"function"==typeof define&&define.amd?define("ui/dropdown",["jquery"],r):"object"==typeof exports?module.exports=r(require("jquery")):r(t.jQuery)}(this,function(t){"use strict";function r(t,r){var e=a(t);c=t.data("active")||c;var o=e.hasClass(c);void 0===r&&i(),o||(e.addClass(c),t.attr("aria-expanded",!0).trigger("show.ui.dropdown",this))}function i(r,i){t(l).each(function(){var e=t(this),n=a(e),d=n.find(l),s=e.attr("data-auto");c=e.data("active")||c,n.hasClass(c)&&(r&&r.isDefaultPrevented()||(i&&s&&o(e,d),n.removeClass(c).find(p).removeClass("hover").show(),e.attr("aria-expanded","false").trigger("hide.ui.dropdown",this).data("currentItem",-1),d.length&&d.trigger("blur")))})}function e(t){i(t,1)}function o(r,i){var e,o=d(r),n=0,a="",s=t.trim(i.val());e=o.filter(function(){return t(this).is(":visible")?(0===n&&(a=t.trim(t(this).text()),n=a==s?1:0),!0):!1}),n||(0===e.length?o.eq(0).trigger("click"):e.eq(0).trigger("click.ui.dropSelect"))}function n(){var r=t(this),i=r.attr("placeholder"),e=t.trim(r.val()),o=d(r);""!==e&&e!==i&&o.hide().filter(function(){var r=t.trim(t(this).text())||"";return r==e&&t(this).addClass("hover"),r.indexOf(e)>-1}).show()}function a(r){var i=t(r).data("target")||t(r).parent();return i}function d(t){var r=a(t);return r.find(p)}function s(t,r){var i=t.parent(),e=t.eq(r).position().top;i.scrollTop(e)}function u(r){return t(this).each(function(){var i=t(this),e=i.data("ui.dropdown");e||i.data("ui.dropdown",e=new g(this)),"string"==typeof r&&e[r].call(t(this))})}var c="active",l='[data-toggle="dropdown"],.form-control-dropdown-value',f='.form-control-dropdown-btn, [data-toggle="dropdown-btn"]',h=".form-control-dropdown-menu",p='.form-control-dropdown-menu li, [role="list"] li',g=function(r){t(r).on("click.ui.dropdown",this.toggle),/input/i.test(r.tagName)&&t(r).on("keyup.ui.dropFilter",this.filter);var i=a(r);i.on("click.ui.dropSelect",p,this.selected(i))};return g.VERSION="1.0.0",g.prototype.toggle=function(i){var e=t(this);if(!e.is(".disabled,:disabled"))return r(e),!1},g.prototype.keydown=function(r){if(27===r.which)return void i(r);if(/(38|40|27|32|13|46|8)/.test(r.which)){var e=t(this),o=void 0===e.data("currentItem")?-1:e.data("currentItem");if(r.stopPropagation(),!e.is(".disabled, :disabled")){var n=a(e);c=e.data("active")||c;var d=n.hasClass(c);if(!d&&27!=r.which||d&&27==r.which)return 27==r.which&&n.find(l).trigger("focus"),e.trigger("click");var u=n.find(p).filter(":visible");if(u.length){if(13==r.which&&u.filter(".hover").length)return void u.filter(".hover").trigger("click.ui.dropSelect");var f=u.index(r.target)>-1?u.index(r.target):o;38==r.which&&f>=0&&f--,40==r.which&&f<u.length&&f++,0>f&&(f=u.length-1),f>=u.length&&(f=0),s(u,f),e.data("currentItem",f),u.removeClass("hover").eq(f).addClass("hover").trigger("focus")}}}},g.prototype.selected=function(r){var e=r.find(l);return function(r){r.preventDefault(),r.stopPropagation();var o=/input/i.test(e[0].tagName),n=t.trim(t(this)[o?"text":"html"]());return e[o?"val":"html"](n).trigger("selected.ui.dropdown",this).trigger("blur"),i(),!1}},g.prototype.filter=function(r){if(/input/i.test(r.target.tagName)){var i=t(this),e=t.trim(i.val()),o=d(i);return""===e?void o.show():void(o.length&&o.map(function(){var r=t(this).text();return r.indexOf(e)>-1?t(this).show():t(this).hide()}))}},g.prototype.focusIn=function(i){var e=t(this);r(e,!0)},t.fn.dropdown=u,t.fn.dropdown.Constructor=g,t(function(){t(l).dropdown(),t(document).on("click.ui.dropdown",e).on("click.ui.dropdown-btn",function(r){var i=r.target;if(t(i).is(f)){var e=t(i).siblings(l);return e.length&&e.dropdown("toggle"),!1}}).on("click.ui.dropdown",function(r){var i=r.target;return t(i).is(h)?(r.stopPropagation(),!1):void 0}).on("focus.ui.dropdown",function(r){var i=r.target;t(i).is(l)&&n(i,r)}).on("keydown.ui.dropdown",function(r){var i=r.target;t(i).is(l)&&g.prototype.keydown.call(i,r)})}),t});